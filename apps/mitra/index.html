<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard Mitra | Assistenku Legal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="/assets/css/app.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Guard Role -->
  <script type="module">
    import { requireRole } from "../shared/auth-guard.js";
    requireRole("MITRA");
  </script>
</head>

<body>
  <header>
    <div>
      <p class="eyebrow">Akses Mitra Kontraktual</p>
      <h1>Kendali SPL & Kinerja</h1>
      <p class="muted">
        Isi kinerja harian, unggah bukti kerja, dan pastikan status legal mengikuti
        lifecycle resmi.
      </p>
    </div>

    <div class="header-actions">
      <button id="btnRefresh" class="secondary">Segarkan Data</button>
      <button id="logoutBtn">Logout</button>
    </div>
  </header>

  <main class="container">
    <!-- RINGKASAN STATUS -->
    <section class="grid two">
      <article class="card highlight">
        <p class="eyebrow">SPL Aktif</p>
        <h2 id="activeSpl">-</h2>
        <p class="muted">Lifecycle: DRAFT → ACTIVE → FINAL → LOCKED</p>
      </article>

      <article class="card">
        <p class="eyebrow">Status Tanda Tangan</p>
        <h2 id="signState">-</h2>
        <p class="muted">
          PrivyID production dengan penandatangan Client & Mitra.
        </p>
      </article>
    </section>

    <!-- KINERJA & DOKUMEN -->
    <section class="grid two">
      <article class="card">
        <div class="section-header">
          <div>
            <p class="eyebrow">Kinerja Harian</p>
            <h3>Lembar Kinerja</h3>
            <p class="muted">
              Data terkunci otomatis setelah submit (LOCKED_BY_SYSTEM).
            </p>
          </div>
        </div>
        <div id="kinerjaList" class="responsive-table"></div>
      </article>

      <article class="card">
        <div class="section-header">
          <div>
            <p class="eyebrow">Dokumen Legal</p>
            <h3>SPL & Perjanjian</h3>
            <p class="muted">
              Dokumen resmi yang terhubung dengan aktivitas mitra.
            </p>
          </div>
        </div>
        <div id="documentList" class="doc-grid"></div>
      </article>
    </section>
  </main>

  <script type="module" src="/apps/mitra/mitra.js"></script>
</body>
</html>
